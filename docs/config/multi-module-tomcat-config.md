# 多模块项目如何配置 Tomcat

## Tomcat

当前项目要想正常运行，必须先下载并配置 **Tomcat 服务器**，否则项目是无法启动的。这是因为 **Spring 本身并不内置 Tomcat 服务器**，需要依赖外部的 `Web` 容器来提供运行环境，因此必须提前完成 `Tomcat` 的下载和安装配置。

## SmartTomcat 插件

在 `IDEA` 中，可以下载安装 **SmartTomcat 插件**，用来帮助你**快速启动 Tomcat 容器**，方便进行项目的开发和调试。

## 使用形参运行

在 IDEA 启动按钮旁边，需要先**配置一个正确的启动项**。启动项中各个配置的含义如下：

+ **Name（名称）**：当前启动项的名称，自定义即可，方便自己区分。
+ **Tomcat Server**：选择你已经下载并解压好的 **Tomcat 安装目录**。
+ **Deployment directory**：选择你项目中 **`web.xml` 所在的目录**。
+ **Use classpath of module**：选择**需要运行的模块**，`IDEA` 会从该模块中加载 `classpath`。
+ **Context path**：设置当前项目的**访问根路径**。如果配置为 `/`，那么客户端只需要通过 **域名 + `/`** 就可以访问到该项目。
+ **Server Port**：设置当前程序对外提供服务的**端口号**。
+ **Admin Port**：设置 **Tomcat 管理指令执行的端口号**。比如，当你在 `IDEA` 里点击那个红色的 **Stop（停止）** 方块按钮时，`SmartTomcat` 插件其实就是在后台，向这个 **Admin Port** 发送了一条 `"SHUTDOWN"` 指令，让 `Tomcat` 自行关闭。

其余配置项一般保持默认即可，最后点击**确认**完成配置。

## 配置启动项

在 `IDEA` 中配置本地 `Tomcat` 并运行 `Demo`，可以按照以下步骤操作：

1. 点击运行按钮左侧的 **编辑配置**（`Edit Configurations`），选择 **本地 Tomcat** 进行配置。
2. **名称**：输入一个自定义名称，例如 `Tomcat`。
3. **应用程序服务器**：选择你本地下载并解压的 `Tomcat` 目录。
4. **URL**：填写 `http://localhost:8080/`，端口号可以根据需要自定义。
5. **JRE**：选择你本地安装的 `JDK`。
6. 点击 **部署** 页面，点击左上角的 **➕** 号，选择 **工件**，然后选择你想要运行的 `Demo` 的 **exploded**（例如 `spring-xml-web:war exploded`）。同时，将 **应用程序上下文** 修改为 `/`。

注意：每次切换 `Demo` 时，都要回到部署页面切换对应的工件，否则每次运行都会启动同一个 `Demo`。